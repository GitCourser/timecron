import{Y as h,f as j,w as q,r as U,o as E,c as S,a,h as e,A,au as B,b as i,k as f,j as M,u as n,M as b,H as V,I as Y,J as F,av as x,U as g,z as y,p as N,aw as T,N as $,ax as z,ay as v,ap as C,O as H,P as O,a5 as _,az as D,aA as I,aB as J}from"./index.62c2fd96.js";import{_ as d}from"./FormField.28284586.js";import{_ as p}from"./FormControl.0b40f631.js";import{m as w}from"./md5.e3d352c7.js";const L={class:"space-y-3 text-center md:text-left lg:mx-12"},G={class:"text-2xl"},K=i("p",null,[f("Last login "),i("b",null,"12 mins ago"),f(" from "),i("b",null,"127.0.0.1")],-1),Q={__name:"UserCard",setup(P){const c=h(),u=j(()=>c.userName);return q(c,m=>{console.log(m),u.value=m.userName}),U(!1),(m,r)=>(E(),S(b,null,{default:a(()=>[e(A,{type:"justify-around lg:justify-center"},{default:a(()=>[e(B,{class:"w-28 mx-auto h-28"}),i("div",L,[i("h1",G,[f(" Howdy, "),i("b",null,M(n(u)),1),f("! ")]),K])]),_:1})]),_:1}))}},W={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},X=i("p",null," \u5BC6\u7801\u4FEE\u6539,\u8BF7\u91CD\u65B0\u767B\u5F55! ",-1),oe={__name:"ProfileView",setup(P){const c=O(),u=h(),m=U(!1),r=V({userName:u.userName,userEmail:u.userEmail,isEmail:"2"});q(u,l=>{for(const s in r)l[s]&&(r[s]=l[s])});const o=V({password_current:"",password:"",password_confirmation:""}),R=()=>{if(console.log(r),r.userName=="")return _("\u8BF7\u586B\u5199\u7528\u6237\u540D\u79F0");if(r.userEmail=="")return _("\u8BF7\u586B\u5199\u7528\u6237\u90AE\u7BB1");D(r).then(l=>{u.setUser(r)})},k=()=>{if(o.password_confirmation!=o.password)return _("\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4");let l=Object.assign({},o);l.password_current=w.exports(o.password_current),l.password_confirmation=w.exports(o.password_confirmation),l.password=w.exports(o.password),I(l).then(s=>{m.value=!0,setTimeout(()=>{J().then(t=>{c.replace({path:"/login"})})},3e3)}),console.log(o)};return(l,s)=>(E(),S(Y,null,{default:a(()=>[e(H,null,{default:a(()=>[e(F,{icon:n(x),title:"\u7BA1\u7406\u5458",main:""},null,8,["icon"]),e(Q,{class:"mb-6"}),i("div",W,[e(b,{"is-form":"",onSubmit:g(R,["prevent"])},{footer:a(()=>[e(y,null,{default:a(()=>[e(N,{color:"info",type:"submit",label:"\u4FEE\u6539"})]),_:1})]),default:a(()=>[e(d,{label:"\u7528\u6237\u540D",help:"Required. Your username"},{default:a(()=>[e(p,{modelValue:r.userName,"onUpdate:modelValue":s[0]||(s[0]=t=>r.userName=t),icon:n(x),name:"username",required:"",autocomplete:"username"},null,8,["modelValue","icon"])]),_:1}),e(d,{label:"E-mail",help:"Required. Your e-mail"},{default:a(()=>[e(p,{modelValue:r.userEmail,"onUpdate:modelValue":s[1]||(s[1]=t=>r.userEmail=t),icon:n(T),type:"email",name:"email",required:"",autocomplete:"email"},null,8,["modelValue","icon"])]),_:1}),e($)]),_:1},8,["onSubmit"]),e(b,{"is-form":"",onSubmit:g(k,["prevent"])},{footer:a(()=>[e(y,null,{default:a(()=>[e(N,{type:"submit",color:"info",label:"\u4FEE\u6539"})]),_:1})]),default:a(()=>[e(d,{label:"\u5F53\u524D\u5BC6\u7801",help:"Required. Your current password"},{default:a(()=>[e(p,{modelValue:o.password_current,"onUpdate:modelValue":s[2]||(s[2]=t=>o.password_current=t),icon:n(z),name:"password_current",type:"password",required:"",autocomplete:"current-password"},null,8,["modelValue","icon"])]),_:1}),e($),e(d,{label:"\u65B0\u7684\u5BC6\u7801",help:"Required. New password"},{default:a(()=>[e(p,{modelValue:o.password,"onUpdate:modelValue":s[3]||(s[3]=t=>o.password=t),icon:n(v),name:"password",type:"password",required:"",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1}),e(d,{label:"\u786E\u8BA4\u5BC6\u7801",help:"Required. New password one more time"},{default:a(()=>[e(p,{modelValue:o.password_confirmation,"onUpdate:modelValue":s[4]||(s[4]=t=>o.password_confirmation=t),icon:n(v),name:"password_confirmation",type:"password",required:"",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1})]),_:1},8,["onSubmit"])]),e(n(C),{visible:m.value,"onUpdate:visible":s[5]||(s[5]=t=>m.value=t),modal:"",header:"\u4FEE\u6539\u6210\u529F",style:{width:"50vw"}},{default:a(()=>[X]),_:1},8,["visible"])]),_:1})]),_:1}))}};export{oe as default};
